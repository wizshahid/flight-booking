<div *ngIf="bookingId === ''">
  <div class="card">
    <div class="card-body row mb-2">
      <div class="col-md-6">
        <img
          src="{{ flight.logoPath }}"
          height="100"
          width="100"
          class="rounded-circle"
        />
      </div>
    </div>
    <div class="card-body row">
      <div class="col-md-6">Airline: {{ flight.airlineName }}</div>
      <div class="col-md-6">Flight No.: {{ flight.flightNumber }}</div>
      <div class="col-md-6">From: {{ flight.fromPlace }}</div>
      <div class="col-md-6">To: {{ flight.toPlace }}</div>
      <div class="col-md-6">Price: {{ flight.price }}</div>
      <div class="col-md-6">Flight Type: {{ flight.flightType }}</div>
    </div>
  </div>
  <div class="card p-2">
    <form [formGroup]="bookForm" (submit)="onSubmit()">
      <div class="row">
        <div class="form-group col-md-6">
          <label for="name">Name</label>
          <input type="text" formControlName="name" class="form-control" />
          <app-validator
            [abstractControl]="bookForm.get('name')"
            [message]="'Name is required'"
            [submitted]="submitted"
          ></app-validator>
        </div>
        <div class="form-group col-md-6">
          <label for="email">Email</label>
          <input type="email" formControlName="email" class="form-control" />
          <app-validator
            [abstractControl]="bookForm.get('email')"
            [message]="'Email is required'"
            [submitted]="submitted"
          ></app-validator>
        </div>
        <div class="form-group col-md-6">
          <label for="date">Date</label>
          <input
            type="date"
            formControlName="date"
            class="form-control"
            [valueAsDate]="bookForm.get('date')?.value"
          />
          <app-validator
            [abstractControl]="bookForm.get('date')"
            [message]="'Date is required'"
            [submitted]="submitted"
          ></app-validator>
        </div>
        <div class="form-group col-md-6">
          <label for="meals">Meals</label>
          <select
            formControlName="meals"
            id="meals"
            class="form-control"
            required
          >
            <option value="None" [selected]="true">None</option>
            <option value="Veg">Veg</option>
            <option value="NonVeg">NonVeg</option>
            <option value="Both">Both</option>
          </select>
        </div>
      </div>
      <ng-container formArrayName="bookingDetails">
        <div class="row">
          <h4 class="col-md-9">Passenger Details</h4>
          <button
            (click)="addDetail()"
            type="button"
            class="btn btn-primary col-md-3"
          >
            Add Seat
          </button>
        </div>
        <ng-container
          *ngFor="let detailForm of details.controls; let i = index"
        >
          <div [formGroup]="asFormGroup(detailForm)">
            <div class="row mt-2">
              <div class="form-group col-md-3">
                <label class="control-label">Name</label>
                <input
                  type="text"
                  formControlName="name"
                  class="form-control"
                />
                <app-validator
                  [abstractControl]="detailForm.get('name')"
                  [message]="'Passenger name is required'"
                  [submitted]="submitted"
                ></app-validator>
              </div>
              <div class="form-group col-md-3">
                <label class="control-label">Gender</label>
                <select formControlName="gender" class="form-control">
                  <option value="Male" [selected]="true">Male</option>
                  <option value="Female">Female</option>
                </select>
              </div>
              <div class="form-group col-md-2">
                <label class="control-label">Age</label>
                <input
                  type="number"
                  formControlName="age"
                  class="form-control"
                />
              </div>
              <div class="form-group col-md-2">
                <label class="control-label">Seat No</label>
                <input
                  type="number"
                  formControlName="seatNumber"
                  class="form-control"
                />
              </div>
              <div class="col-md-2">
                <button
                  (click)="removeDetail(i)"
                  type="button"
                  class="btn btn-danger"
                >
                  Remove
                </button>
              </div>
            </div>
          </div>
        </ng-container>
      </ng-container>
      <button type="submit" class="btn btn-primary">Submit</button>
    </form>
  </div>
</div>

<div *ngIf="bookingId !== ''" class="text-center p-5 card">
  <h3 class="text-success">Your flight has been booked successfully.</h3>
  <div class="p-2">
    <a [routerLink]="['/user/flight/booking', bookingId]">Click here</a> to
    check the booking details
  </div>
</div>
